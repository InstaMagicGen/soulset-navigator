<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Soulset Companion â€¢ Emotional Wellness App</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --text: #2e3d45;
      --muted: #708a94;
      --card: rgba(255,255,255,0.75);
      --bg: #f1f6f8;
      --primary:#5aa3a6;
      --shadow: 0 10px 28px rgba(0,0,0,0.15);
    }

    body{
      margin:0;
      font-family: Nunito, sans-serif;
      color:var(--text);
      background: var(--bg);
      -webkit-font-smoothing: antialiased;
    }

    /* â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
       Hero full-screen video background
    â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” */

    .hero-video{
      position:fixed;
      top:0; left:0;
      width:100%; height:100%;
      object-fit:cover;
      filter:brightness(0.72) saturate(1.15) blur(1px);
      z-index:-2;
    }

    .gradient-overlay{
      position:fixed;
      top:0; left:0;
      width:100%; height:100%;
      background:linear-gradient(to bottom, rgba(0,0,0,0.55), rgba(0,0,0,0.15), rgba(255,255,255,0.2));
      z-index:-1;
    }

    /* â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
       Main Container
    â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” */
    .container{
      max-width:850px;
      margin:0 auto;
      padding:40px 22px 120px;
    }

    header{
      text-align:center;
      padding-top:28px;
      margin-bottom:28px;
      color:white;
    }
    header h1{
      font-family:"Playfair Display", serif;
      font-size:clamp(30px, 5vw, 42px);
      margin:0;
    }
    header .subtitle{
      font-size:15px;
      opacity:0.85;
      margin-top:8px;
    }

    /* â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
       Emotional Check-In Card
    â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” */
    .card{
      background:var(--card);
      backdrop-filter:blur(14px);
      -webkit-backdrop-filter:blur(14px);
      padding:24px 22px;
      border-radius:22px;
      box-shadow:var(--shadow);
      margin-bottom:26px;
    }
    .card h2{
      margin:0 0 12px;
      font-size:22px;
      font-family:"Playfair Display", serif;
    }
    textarea{
      width:100%;
      border:0;
      border-radius:16px;
      padding:16px;
      font-size:17px;
      min-height:110px;
      resize:vertical;
      color:var(--text);
      background:rgba(255,255,255,0.7);
      backdrop-filter:blur(6px);
      outline:none;
    }

    /* Buttons */
    .actions{
      display:flex;
      flex-wrap:wrap;
      gap:12px;
      margin-top:12px;
    }
    .btn{
      appearance:none;
      border:0;
      padding:14px 20px;
      border-radius:16px;
      font-weight:700;
      cursor:pointer;
      background:var(--primary);
      color:white;
      box-shadow:var(--shadow);
      font-size:15px;
    }
    .btn:disabled{
      opacity:0.6;
      cursor:not-allowed;
    }
    .secondary-btn{
      background:rgba(255,255,255,0.4);
      color:var(--text);
      font-weight:600;
    }

    /* Results */
    #result .bubble{
      margin-top:20px;
      background:white;
      padding:18px 20px;
      border-radius:18px;
      box-shadow:var(--shadow);
      line-height:1.65;
      white-space:pre-line;
    }

    /* Sunset Reset Button Block */
    .sunset-block{
      display:none;
      text-align:center;
      margin-top:28px;
    }
    .sunset-btn{
      background:#ffffffaa;
      color:#000;
      padding:14px 22px;
      border-radius:20px;
      font-size:16px;
      font-weight:700;
      backdrop-filter:blur(12px);
      box-shadow:var(--shadow);
    }

  </style>
</head>

<body>

  <!-- Fullscreen background video -->
  <video class="hero-video" autoplay muted loop playsinline>
    <source src="Sunset-1V.mp4" type="video/mp4">
  </video>
  <div class="gradient-overlay"></div>

  <div class="container">

    <header>
      <h1>Soulset Companion</h1>
      <div class="subtitle" id="subtitle">
        Emotional wellness â€¢ Gentle therapeutic guidance
      </div>
    </header>

    <!-- Emotional Check-in -->
    <section class="card">
      <h2 id="step-title">Emotional Check-In</h2>
      <p id="step-desc" style="margin-top:-6px; font-size:14px; color:var(--muted);">
        Describe what you're feeling or what happened. The Soulset Companion will mirror your emotions
        and offer therapeutic micro-practices.
      </p>

      <textarea id="inputText" placeholder="Ex: I feel overwhelmed and emotionally tired..."></textarea>

      <div class="actions">
        <button class="btn" id="analyzeBtn">Reflect with me</button>
        <button class="btn secondary-btn" id="clearBtn">Clear</button>
      </div>

      <div id="status" style="margin-top:10px; font-size:13px; color:white;"></div>

      <div id="result"></div>
    </section>

    <!-- Sunset Reset Block -->
    <div class="sunset-block" id="sunsetBlock">
      <button class="sunset-btn" id="sunsetBtn">ðŸŒ… Sunset Reset (60 seconds)</button>
    </div>

  </div>

  <script>
    const qs = s => document.querySelector(s);
    const input = qs("#inputText");
    const result = qs("#result");
    const statusEl = qs("#status");
    const sunsetBlock = qs("#sunsetBlock");
    const stepTitle = qs("#step-title");
    const stepDesc = qs("#step-desc");
    const subtitle = qs("#subtitle");

    /* â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
       Auto language detection (based on system)
    â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” */
    let userLang = navigator.language.toLowerCase().substring(0,2);

    function applyLanguageUI(lang){
      if(lang === "fr"){
        stepTitle.textContent = "Bilan Ã‰motionnel";
        stepDesc.textContent = "DÃ©cris ce que tu ressens ou ce qu'il s'est passÃ©. Le Soulset Companion te renverra un miroir Ã©motionnel et quelques micro-pratiques thÃ©rapeutiques.";
        subtitle.textContent = "Bien-Ãªtre Ã©motionnel â€¢ Guidance thÃ©rapeutique douce";
        qs("#analyzeBtn").textContent = "Explorer avec moi";
        qs("#clearBtn").textContent = "Effacer";
        input.placeholder = "Ex : Je me sens vidÃ©(e), anxieux(se), et jâ€™ai du mal Ã  me recentrer...";
      }
    }
    applyLanguageUI(userLang);

    /* â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
       Helper to render messages
    â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” */
    function renderMessage(text){
      const div = document.createElement("div");
      div.className = "bubble";
      div.innerHTML = text;
      result.innerHTML = "";
      result.appendChild(div);
    }

    /* â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
       Button actions
    â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” */
    qs("#analyzeBtn").onclick = async () => {
      const text = input.value.trim();
      if(!text){ input.focus(); return; }

      statusEl.textContent = (userLang==="fr") ? "Analyse en coursâ€¦" : "Readingâ€¦";
      renderMessage("â³ " + ((userLang==="fr") ? "Je tâ€™Ã©couteâ€¦" : "Iâ€™m listeningâ€¦"));

      try {
        const res = await fetch("/api/analyze", {
          method:"POST",
          headers:{ "Content-Type":"application/json" },
          body:JSON.stringify({ text, lang: userLang })
        });
        const data = await res.json();

        if(data.ok){
          renderMessage(data.text);
          sunsetBlock.style.display = "block";
          statusEl.textContent = "";
        } else {
          renderMessage("âš ï¸ Error generating guidance.");
        }
      } catch(err){
        renderMessage("âš ï¸ Connection error.");
      }
    };

    qs("#clearBtn").onclick = () => {
      input.value = "";
      result.innerHTML = "";
      statusEl.textContent = "";
      sunsetBlock.style.display = "none";
    };

    /* â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
       Sunset Reset Button (full screen video soon)
    â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” */
    qs("#sunsetBtn").onclick = () => {
      window.scrollTo({ top: 0, behavior:"smooth" });
    };
  </script>
  <!-- â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
    FULLSCREEN SUNSET RESET EXPERIENCE
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” -->
<style>
  .sunset-fullscreen {
    position: fixed;
    inset: 0;
    z-index: 9999;
    background: black;
    display: none;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    overflow: hidden;
    animation: fadeIn 0.4s ease;
  }

  @keyframes fadeIn {
    from { opacity: 0; } to { opacity: 1; }
  }
  @keyframes fadeOut {
    from { opacity: 1; } to { opacity: 0; }
  }

  .sunset-fullscreen video {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    filter: brightness(1.05) saturate(1.22);
  }

  .sunset-overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(to top, rgba(0,0,0,0.5), rgba(0,0,0,0.15));
  }

  .sunset-close {
    position: absolute;
    top: 30px;
    right: 30px;
    background: rgba(255,255,255,0.2);
    border: 1px solid rgba(255,255,255,0.4);
    color: white;
    font-size: 22px;
    font-weight: 700;
    padding: 10px 16px;
    border-radius: 14px;
    cursor: pointer;
    backdrop-filter: blur(10px);
  }

  .sunset-timer {
    position: absolute;
    bottom: 60px;
    text-align: center;
    color: white;
    font-size: 28px;
    font-weight: 700;
    text-shadow: 0 2px 10px rgba(0,0,0,0.65);
  }
</style>

<div class="sunset-fullscreen" id="sunsetFS">
  <video id="sunsetFSVideo" autoplay muted playsinline>
    <source src="Sunset-1V.mp4" type="video/mp4">
  </video>
  <div class="sunset-overlay"></div>
  <div class="sunset-timer" id="sunsetTimer">60</div>
  <div class="sunset-close" id="sunsetClose">Ã—</div>
</div>

<script>
  const sunsetFS = document.getElementById("sunsetFS");
  const sunsetFSVideo = document.getElementById("sunsetFSVideo");
  const sunsetTimer = document.getElementById("sunsetTimer");
  const sunsetClose = document.getElementById("sunsetClose");

  let sunsetInterval;

  function startSunsetReset(){
    sunsetFS.style.display = "flex";
    sunsetFS.style.animation = "fadeIn 0.4s ease";

    sunsetFSVideo.currentTime = 0;
    sunsetFSVideo.play();

    let time = 60;
    sunsetTimer.textContent = time;

    sunsetInterval = setInterval(() => {
      time--;
      sunsetTimer.textContent = time;
      if(time <= 0){
        clearInterval(sunsetInterval);
        closeSunsetReset();
      }
    }, 1000);
  }

  function closeSunsetReset(){
    sunsetFS.style.animation = "fadeOut 0.4s ease";
    setTimeout(() => {
      sunsetFS.style.display = "none";
      sunsetFSVideo.pause();
    }, 400);

    clearInterval(sunsetInterval);
  }

  document.getElementById("sunsetBtn").onclick = startSunsetReset;
  sunsetClose.onclick = closeSunsetReset;
</script>

</body>
</html>
